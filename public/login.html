<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Log in</title>
	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<!-- Firebase App is always required and must be first -->
	<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-app.js"></script>
	
	<!-- Add additional services that you want to use -->
	<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-firestore.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-messaging.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-functions.js"></script>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	<script src="./script.js"></script>


	<div class="panel panel-danger login">
		<div class="panel-heading">
			<h3 class="panel-title">Đăng nhập</h3>
		</div>
		<div class="panel-body">
			<form role="form" id="login-form">
				<div class="form-group">
					<hr>
					<label for="#username-login">Tên đăng nhập</label>
					<input type="text" class="form-control" id="username-login" placeholder="Điền tên tài khoản của bạn...">

					<hr>

					<label for="#password-login">Mật khẩu</label>
					<input type="password" class="form-control" id="password-login" placeholder="Điền mật khẩu của bạn...">
				</div>
			
				<hr>
				<div id="error-message" style="color: red"></div>
				<hr>
				<button type="button" class="btn btn-primary" onclick="login()">Đăng nhập</button>

				<script>
					// Check Login
				    function login () {
						console.log('login');
				       var user = document.getElementById('username-login').value;
				       var password = document.getElementById('password-login').value;
				       var error = document.getElementById('error-message');
				       var dbuser = firebase.database().ref('Login/User');
					   var dbpass = firebase.database().ref('Login/Pass');
					   console.log(dbuser + ' ' + dbpass);
				       var userTrue;
				       var passTrue;


				        dbuser.on( 'value', snap => {
				            userTrue = snap.val();

				            dbpass.on( 'value', snap2 => {
								passTrue = snap2.val();
								console.log(userTrue);
								console.log(passTrue);

				                if ( ( user === userTrue ) && ( password === passTrue ) ) {
				                    window.location="./home.html";
				                } else {
				                    error.innerHTML = 'Tên đăng nhập hoặc mật khẩu không đúng';
				                }
				            })
				        })
				    }
				</script>
			</form>
		</div>
	</div>

	<!-- <div class="panel panel-default footer">
		<div class="panel-footer">
			Copyright &copy; 2018. All rights reserved
		</div>
	</div> -->
	

	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
	<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
	
</body>
</html>